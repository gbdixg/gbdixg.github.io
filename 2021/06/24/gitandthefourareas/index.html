<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>GIT storage - understanding the stash, working, index, repo | Write-Verbose</title><meta name=keywords content="git,devops"><meta name=description content="GIT commands move data between four areas of the object database. This article explores the four areas and the common commands that affect them.
See the earlier post on How GIT stores information for information on the GIT object database."><meta name=author content="GD"><link rel=canonical href=https://write-verbose.com/2021/06/24/gitandthefourareas/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://write-verbose.com/fav/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://write-verbose.com/fav/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://write-verbose.com/fav/favicon-32x32.png><link rel=apple-touch-icon href=https://write-verbose.com/apple-touch-icon.png><link rel=mask-icon href=https://write-verbose.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-141237050-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="GIT storage - understanding the stash, working, index, repo"><meta property="og:description" content="GIT commands move data between four areas of the object database. This article explores the four areas and the common commands that affect them.
See the earlier post on How GIT stores information for information on the GIT object database."><meta property="og:type" content="article"><meta property="og:url" content="https://write-verbose.com/2021/06/24/gitandthefourareas/"><meta property="og:image" content="https://write-verbose.com/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-24T17:45:34+00:00"><meta property="article:modified_time" content="2021-06-24T17:45:34+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://write-verbose.com/papermod-cover.png"><meta name=twitter:title content="GIT storage - understanding the stash, working, index, repo"><meta name=twitter:description content="GIT commands move data between four areas of the object database. This article explores the four areas and the common commands that affect them.
See the earlier post on How GIT stores information for information on the GIT object database."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://write-verbose.com/posts/"},{"@type":"ListItem","position":2,"name":"GIT storage - understanding the stash, working, index, repo","item":"https://write-verbose.com/2021/06/24/gitandthefourareas/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"GIT storage - understanding the stash, working, index, repo","name":"GIT storage - understanding the stash, working, index, repo","description":"GIT commands move data between four areas of the object database. This article explores the four areas and the common commands that affect them.\nSee the earlier post on How GIT stores information for information on the GIT object database.\n","keywords":["git","devops"],"articleBody":"GIT commands move data between four areas of the object database. This article explores the four areas and the common commands that affect them.\nSee the earlier post on How GIT stores information for information on the GIT object database.\nWhat are the four areas GIT uses? The Working Area stores project source files updated directly by a code editor The Index (or Staging Areas) tracks which files from the working area included in the next commit The Repository (or Repo) is the most important area, where GIT stores snapshots of the tracked files, called commits The Stash is a temporary area, a bit like a clipboard, that can store and retrieve a saved copy of the working area and index Understanding git requires understanding how commands move data between these four areas.\nGIT STATUS git status is one of the most important commands. It shows the status of the working area and index. The most common output shows untracked files and modified files.\n❯ git status On branch master nothing to commit, working tree clean New files When a file is created or copied into the project, it only exists in the working area. git status will show the file as untracked. It has not been added to the index (staging) area and will not be part of the next commit until added. The status command shows the list of new files and suggests how to add them to the index.\n❯ git status On branch master Untracked files: (use \"git add ...\" to include in what will be committed) consolidate.py nothing added to commit but untracked files present (use \"git add\" to track) Modified files Files added to the index are tracked by GIT. When a tracked file is updated or modified, git status shows the it as modified and not yet staged for commit. The working area version has changed, but GIT is only tracking the previous version in the index. The updated file needs to be added to the index to be included in the next commit. The status command shows the modified files and suggests actions to take.\n❯ git status On branch master Changes not staged for commit: (use \"git add ...\" to update what will be committed) (use \"git restore ...\" to discard changes in working directory) modified: consolidate.py no changes added to commit (use \"git add\" and/or \"git commit -a\") Changes not committed git status also shows changes in the index but not yet committed to the repo. These could be new and/or modified files.\n❯ git status On branch master Changes to be committed: (use \"git restore --staged ...\" to unstage) modified: consolidate.py Remote A remote is a linked repository, for example, a central source repo that the local repo was originally cloned from. GIT maintains the link to the remote and tracks differences. By default, the remote is named origin. git status will show if the remote repo is ahead or behind the current local commit.\n❯ git status On branch master Your branch is ahead of 'origin/master' by 1 commit. (use \"git push\" to publish your local commits) nothing to commit, working tree clean GIT ADD The git add command updates the index (staging) area to track new files or add new versions of already tracked files. The most common parameters are as follows:\n❯ git add mynewfile.txt # stage a specific file in the index ❯ git add folder1/ # stage all new and modified files in folder1 ❯ git add -A # stage all new and modified files in the entire project ❯ git add . # same as above ❯ git add -i # interactive mode. Prompts for a decision on a file-by-file basis GIT DIFF git diff shows differences between the GIT areas, such as between the working area and index, or between the index and repo. Differences are displayed at the command line. git diff is convenient for quick checks and small changes. Graphical tools may be better suited for complex comparisons.\n❯ git diff # shows differences between the working area and index ❯ git diff --cached # shows differences between the index and repo diff --git a/consolidate.py b/consolidate.py index de10111..97f66ce 100644 --- a/consolidate.py +++ b/consolidate.py @@ -1 +1,2 @@ import sys +print (sys.version) In the example output above, there is a difference between the index and the repo. A line has been added in the index version, indicated by the “+” symbol.\nGIT COMMIT The git commit command creates a point-in-time snapshot of tracked files in the repo. New and modified files from the index are added to the repo as new objects. Unchanged files are just referenced by a link to the existing object in the repo. The commit itself is an object in the repository, pointing to a tree and any parent commit.\nA commit is named using a SHA1 hash. It can be referenced in commands using just the first few characters of the hash (enough that it is not ambiguous).\n❯ git commit -m \"Enabled handling of user input\" [main b9b6064] Enabled handling of user input 1 file changed, 1 insertion(+), 1 deletion(-) In the output above, a new commit is created on the main branch with partial SHA1 hash b9b6064\nGIT BRANCH A branch is just a reference to a commit. Creating a branch does not actually change objects in the repo, it just creates a named pointer to an existing commit. If you are on the main branch and create a new branch called dev, GIT adds a new dev object in the .git/refs folder pointing to the current commit. Initially both branches are pointing to the same commit.\nThe git branch command shows the current branches or creates a new branch, but does not switch to it. The asterisk in the output below shows that after creating a new dev branch, main is still the current branch:\n❯ git branch dev # create a new branch. ❯ ❯ git branch # show branches dev * main GIT SWITCH git switch is a relatively new command that switches between branches. It does not make changes to the repo, but it does affect the working area and index. When you switch to another branch, the GIT HEAD reference is updated to point to the selected branch. The branch refers to a commit and the files and folders in the working area and index are replaced by the files in this commit.\n❯ git switch dev Switched to branch 'dev' ❯ ❯ git branch * dev main You can create a branch and switch to it with the -c option\n❯ git switch -c feature Switched to a new branch 'feature' GIT CHECKOUT When it comes to moving between branches, git checkout is almost identical to git switch. The checkout command has been around for much longer and has options that perform other actions. The variety of uses for the checkout command was deemed confusing and switch was introduced to focus purely on moving between branches.\n❯ git checkout dev # change to the dev branch Switched to branch 'dev' ❯ ❯ git branch # show 'dev' is now the current branch * dev feature main ❯ ❯ git checkout -b feature2 # create a new branch and switch to it Switched to a new branch 'feature2' ❯ ❯ git branch # show 'feature2' is not the current branch dev feature * feature2 main GIT LOG git log shows the history of commits and branches. It does not make any changes to the repo, index or working area. Use the –graph option to see a basic diagram of branches and merges:\n❯ git log --oneline --graph --decorate * a7d531d (HEAD -\u003e main) Merge Feature2, resolve conflict in orders.py |\\ | * d0773eb (feature2) Adds input validation to orders.py * | bba3001 Modifies output in orders.py |/ * 460ce0e Enables user input * b9b6064 Creates orders.py GIT RESET git reset is used to rollback to a previous commit. It can affect the repo, the index and the working area depending on the parameters.\nA common use case is to abandon some changes that have been committed and revert to a previous version of the project. Another is to abandon changes in the working area and revert to the last commit in the repo.\nThe reset command will move the current branch to the specified commit. By default, it will also overwrite the index with the contents of the commit. If you want to completely remove all traces of the unwanted change, you can also overwrite the working area using the –hard option\n\u003e git log --oneline # show the history of commits 848eae0 (HEAD -\u003e main) Adds search to 404 page 364b33f Changes format of 404 page d4ff0dc Modifies position of search box c55dbb1 Enables comments cccb986 Adds home page, header and footer 4478398 Initial commit \u003e \u003e git reset --hard d4ff0dc # Rollback the repo two commits, overwriting the index and working area HEAD is now at d4ff0dc Modifies position of search box Other options are:\n\u003e git reset --mixed d4ff0dc # Rollback the repo two commits but only overwrite the index. The working area is not touched. This is also the default if no options are specified. \u003e git reset --soft d4ff0dc # Rollback the repo two commits, but don't touch the index or working area HEAD RESET git reset HEAD is a quick way to return the index/working area to the committed state of the repo. This is an unsual reset as it doesn’t actually change anything in the repo.\nHEAD is usually poiting to the latest commit on the current branch. Resetting the repo to HEAD changes nothing in the repo, but by default it will perform a mixed reset, overwriting the index. We can also use the –hard option to overwrite both the index and working area:\n\u003e git reset --hard HEAD GIT STASH The Stash is a temporary storage area to save the working area and index when you need to working on another feature. You don’t want to lose or commit what you are currently working on, so you stash the changes, work on something else and then retrieve them later. Its a bit like saving something in a clipboard.\nWhen you run git stash, GIT copies tracked files in the working area and index that aren’t in the current commit and saves them to the stash. It then checks out the current commit (overwriting the working area and index so they match the repo).\nWhen ready to restore the stashed files, run git stash apply.\n\u003e git stash --include-untracked # Save changes to the stash including untracked files \u003e \u003e git stash list # List the contents of the stash. This is an array of saves starting with zero \u003e \u003e git stash apply # Copies the latest entry in the stash to the working area and index. You can also specify an array element number if you don't want the latest This article was originally posted on Write-Verbose.com\n","wordCount":"1838","inLanguage":"en","datePublished":"2021-06-24T17:45:34Z","dateModified":"2021-06-24T17:45:34Z","author":{"@type":"Person","name":"GD"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://write-verbose.com/2021/06/24/gitandthefourareas/"},"publisher":{"@type":"Organization","name":"Write-Verbose","logo":{"@type":"ImageObject","url":"https://write-verbose.com/fav/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://write-verbose.com/ accesskey=h title="Write-Verbose (Alt + H)">Write-Verbose</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://write-verbose.com/archives title=Archive><span>Archive</span></a></li><li><a href=https://write-verbose.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://write-verbose.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://write-verbose.com/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://write-verbose.com/>Home</a>&nbsp;»&nbsp;<a href=https://write-verbose.com/posts/>Posts</a></div><h1 class=post-title>GIT storage - understanding the stash, working, index, repo</h1><div class=post-meta><span title='2021-06-24 17:45:34 +0000 UTC'>June 24, 2021</span>&nbsp;·&nbsp;9 min&nbsp;·&nbsp;GD</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-are-the-four-areas-git-uses aria-label="What are the four areas GIT uses?">What are the four areas GIT uses?</a></li><li><a href=#git-status aria-label="GIT STATUS">GIT STATUS</a><ul><li><a href=#new-files aria-label="New files">New files</a></li><li><a href=#modified-files aria-label="Modified files">Modified files</a></li><li><a href=#changes-not-committed aria-label="Changes not committed">Changes not committed</a></li><li><a href=#remote aria-label=Remote>Remote</a></li></ul></li><li><a href=#git-add aria-label="GIT ADD">GIT ADD</a></li><li><a href=#git-diff aria-label="GIT DIFF">GIT DIFF</a></li><li><a href=#git-commit aria-label="GIT COMMIT">GIT COMMIT</a></li><li><a href=#git-branch aria-label="GIT BRANCH">GIT BRANCH</a></li><li><a href=#git-switch aria-label="GIT SWITCH">GIT SWITCH</a></li><li><a href=#git-checkout aria-label="GIT CHECKOUT">GIT CHECKOUT</a></li><li><a href=#git-log aria-label="GIT LOG">GIT LOG</a></li><li><a href=#git-reset aria-label="GIT RESET">GIT RESET</a><ul><li><a href=#head-reset aria-label="HEAD RESET">HEAD RESET</a></li></ul></li><li><a href=#git-stash aria-label="GIT STASH">GIT STASH</a></li></ul></div></details></div><div class=post-content><p>GIT commands move data between four areas of the object database. This article explores the four areas and the common commands that affect them.</p><p>See the earlier post on <a href=/2021/06/17/git-cheatnotes/>How GIT stores information</a> for information on the GIT object database.</p><h2 id=what-are-the-four-areas-git-uses>What are the four areas GIT uses?<a hidden class=anchor aria-hidden=true href=#what-are-the-four-areas-git-uses>#</a></h2><ol><li>The <em>Working Area</em> stores project source files updated directly by a code editor</li><li>The <em>Index</em> (or Staging Areas) tracks which files from the working area included in the next commit</li><li>The <em>Repository</em> (or Repo) is the most important area, where GIT stores snapshots of the tracked files, called <em>commits</em></li><li>The <em>Stash</em> is a temporary area, a bit like a clipboard, that can store and retrieve a saved copy of the working area and index</li></ol><p>Understanding git requires understanding how commands move data between these four areas.</p><p><img loading=lazy src=/assets/images/gitnotes-git1.jpg alt=FourAreas></p><h2 id=git-status>GIT STATUS<a hidden class=anchor aria-hidden=true href=#git-status>#</a></h2><p><code>git status</code> is one of the most important commands. It shows the status of the working area and index. The most common output shows untracked files and modified files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git status
</span></span><span class=line><span class=cl>On branch master
</span></span><span class=line><span class=cl>nothing to commit, working tree clean
</span></span></code></pre></div><h3 id=new-files>New files<a hidden class=anchor aria-hidden=true href=#new-files>#</a></h3><p>When a file is created or copied into the project, it only exists in the working area. <code>git status</code> will show the file as <em>untracked</em>. It has not been added to the index (staging) area and will not be part of the next commit until added. The status command shows the list of new files and suggests how to add them to the index.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git status
</span></span><span class=line><span class=cl>On branch master
</span></span><span class=line><span class=cl>Untracked files:
</span></span><span class=line><span class=cl>  <span class=o>(</span>use <span class=s2>&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span class=o>)</span>
</span></span><span class=line><span class=cl>        consolidate.py
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nothing added to commit but untracked files present <span class=o>(</span>use <span class=s2>&#34;git add&#34;</span> to track<span class=o>)</span>
</span></span></code></pre></div><h3 id=modified-files>Modified files<a hidden class=anchor aria-hidden=true href=#modified-files>#</a></h3><p>Files added to the index are tracked by GIT. When a tracked file is updated or modified, <code>git status</code> shows the it as <em>modified</em> and not yet staged for commit. The working area version has changed, but GIT is only tracking the previous version in the index. The updated file needs to be added to the index to be included in the next commit. The status command shows the modified files and suggests actions to take.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git status
</span></span><span class=line><span class=cl>On branch master
</span></span><span class=line><span class=cl>Changes not staged <span class=k>for</span> commit:
</span></span><span class=line><span class=cl>  <span class=o>(</span>use <span class=s2>&#34;git add &lt;file&gt;...&#34;</span> to update what will be committed<span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>(</span>use <span class=s2>&#34;git restore &lt;file&gt;...&#34;</span> to discard changes in working directory<span class=o>)</span>
</span></span><span class=line><span class=cl>        modified:   consolidate.py
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>no changes added to commit <span class=o>(</span>use <span class=s2>&#34;git add&#34;</span> and/or <span class=s2>&#34;git commit -a&#34;</span><span class=o>)</span>
</span></span></code></pre></div><h3 id=changes-not-committed>Changes not committed<a hidden class=anchor aria-hidden=true href=#changes-not-committed>#</a></h3><p><code>git status</code> also shows changes in the index but not yet committed to the repo. These could be new and/or modified files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git status
</span></span><span class=line><span class=cl>On branch master
</span></span><span class=line><span class=cl>Changes to be committed:
</span></span><span class=line><span class=cl>  <span class=o>(</span>use <span class=s2>&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span class=o>)</span>
</span></span><span class=line><span class=cl>        modified:   consolidate.py
</span></span></code></pre></div><h3 id=remote>Remote<a hidden class=anchor aria-hidden=true href=#remote>#</a></h3><p>A <em>remote</em> is a linked repository, for example, a central source repo that the local repo was originally cloned from. GIT maintains the link to the remote and tracks differences. By default, the remote is named <em>origin</em>. <code>git status</code> will show if the remote repo is ahead or behind the current local commit.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git status
</span></span><span class=line><span class=cl>On branch master
</span></span><span class=line><span class=cl>Your branch is ahead of <span class=s1>&#39;origin/master&#39;</span> by <span class=m>1</span> commit.
</span></span><span class=line><span class=cl>  <span class=o>(</span>use <span class=s2>&#34;git push&#34;</span> to publish your <span class=nb>local</span> commits<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nothing to commit, working tree clean
</span></span></code></pre></div><h2 id=git-add>GIT ADD<a hidden class=anchor aria-hidden=true href=#git-add>#</a></h2><p>The <code>git add</code> command updates the index (staging) area to track new files or add new versions of already tracked files. The most common parameters are as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git add mynewfile.txt <span class=c1># stage a specific file in the index</span>
</span></span><span class=line><span class=cl>❯ git add folder1/ <span class=c1># stage all new and modified files in folder1</span>
</span></span><span class=line><span class=cl>❯ git add -A <span class=c1># stage all new and modified files in the entire project</span>
</span></span><span class=line><span class=cl>❯ git add . <span class=c1># same as above</span>
</span></span><span class=line><span class=cl>❯ git add -i <span class=c1># interactive mode. Prompts for a decision on a file-by-file basis</span>
</span></span></code></pre></div><h2 id=git-diff>GIT DIFF<a hidden class=anchor aria-hidden=true href=#git-diff>#</a></h2><p><code>git diff</code> shows differences between the GIT areas, such as between the working area and index, or between the index and repo. Differences are displayed at the command line. <code>git diff</code> is convenient for quick checks and small changes. Graphical tools may be better suited for complex comparisons.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git diff <span class=c1># shows differences between the working area and index</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git diff --cached <span class=c1># shows differences between the index and repo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>diff --git a/consolidate.py b/consolidate.py
</span></span><span class=line><span class=cl>index de10111..97f66ce <span class=m>100644</span>
</span></span><span class=line><span class=cl>--- a/consolidate.py
</span></span><span class=line><span class=cl>+++ b/consolidate.py
</span></span><span class=line><span class=cl>@@ -1 +1,2 @@
</span></span><span class=line><span class=cl> import sys
</span></span><span class=line><span class=cl>+print <span class=o>(</span>sys.version<span class=o>)</span>
</span></span></code></pre></div><p>In the example output above, there is a difference between the index and the repo. A line has been added in the index version, indicated by the &ldquo;+&rdquo; symbol.</p><h2 id=git-commit>GIT COMMIT<a hidden class=anchor aria-hidden=true href=#git-commit>#</a></h2><p>The <code>git commit</code> command creates a point-in-time snapshot of tracked files in the repo. New and modified files from the index are added to the repo as new objects. Unchanged files are just referenced by a link to the existing object in the repo. The commit itself is an object in the repository, pointing to a tree and any parent commit.<br>A commit is named using a SHA1 hash. It can be referenced in commands using just the first few characters of the hash (enough that it is not ambiguous).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git commit -m <span class=s2>&#34;Enabled handling of user input&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>main b9b6064<span class=o>]</span> Enabled handling of user input
</span></span><span class=line><span class=cl> <span class=m>1</span> file changed, <span class=m>1</span> insertion<span class=o>(</span>+<span class=o>)</span>, <span class=m>1</span> deletion<span class=o>(</span>-<span class=o>)</span>
</span></span></code></pre></div><p>In the output above, a new commit is created on the main branch with partial SHA1 hash <em>b9b6064</em></p><h2 id=git-branch>GIT BRANCH<a hidden class=anchor aria-hidden=true href=#git-branch>#</a></h2><p>A branch is just a reference to a commit. Creating a branch does not actually change objects in the repo, it just creates a named pointer to an existing commit.
If you are on the <em>main</em> branch and create a new branch called <em>dev</em>, GIT adds a new <em>dev</em> object in the .git/refs folder pointing to the current commit. Initially both branches are pointing to the same commit.<br>The <code>git branch</code> command shows the current branches or creates a new branch, but does not switch to it. The asterisk in the output below shows that after creating a new <em>dev</em> branch, main is still the current branch:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git branch dev <span class=c1># create a new branch. </span>
</span></span><span class=line><span class=cl>❯
</span></span><span class=line><span class=cl>❯ git branch <span class=c1># show branches</span>
</span></span><span class=line><span class=cl>  dev
</span></span><span class=line><span class=cl>* main
</span></span></code></pre></div><h2 id=git-switch>GIT SWITCH<a hidden class=anchor aria-hidden=true href=#git-switch>#</a></h2><p><code>git switch</code> is a relatively new command that switches between branches. It does not make changes to the repo, but it does affect the working area and index. When you switch to another branch, the GIT <em>HEAD</em> reference is updated to point to the selected branch. The branch refers to a commit and the files and folders in the working area and index are replaced by the files in this commit.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git switch dev
</span></span><span class=line><span class=cl>Switched to branch <span class=s1>&#39;dev&#39;</span>
</span></span><span class=line><span class=cl>❯
</span></span><span class=line><span class=cl>❯ git branch
</span></span><span class=line><span class=cl>* dev
</span></span><span class=line><span class=cl>  main
</span></span></code></pre></div><p>You can create a branch and switch to it with the <code>-c</code> option</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git switch -c feature
</span></span><span class=line><span class=cl>Switched to a new branch <span class=s1>&#39;feature&#39;</span>
</span></span></code></pre></div><h2 id=git-checkout>GIT CHECKOUT<a hidden class=anchor aria-hidden=true href=#git-checkout>#</a></h2><p>When it comes to moving between branches, <code>git checkout</code> is almost identical to <code>git switch</code>. The checkout command has been around for much longer and has options that perform other actions. The variety of uses for the checkout command was deemed confusing and switch was introduced to focus purely on moving between branches.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git checkout dev <span class=c1># change to the dev branch</span>
</span></span><span class=line><span class=cl>Switched to branch <span class=s1>&#39;dev&#39;</span>
</span></span><span class=line><span class=cl>❯ 
</span></span><span class=line><span class=cl>❯ git branch <span class=c1># show &#39;dev&#39; is now the current branch</span>
</span></span><span class=line><span class=cl>* dev
</span></span><span class=line><span class=cl>  feature
</span></span><span class=line><span class=cl>  main
</span></span><span class=line><span class=cl>❯
</span></span><span class=line><span class=cl>❯ git checkout -b feature2 <span class=c1># create a new branch and switch to it</span>
</span></span><span class=line><span class=cl>Switched to a new branch <span class=s1>&#39;feature2&#39;</span>
</span></span><span class=line><span class=cl>❯
</span></span><span class=line><span class=cl>❯ git branch <span class=c1># show &#39;feature2&#39; is not the current branch</span>
</span></span><span class=line><span class=cl>  dev
</span></span><span class=line><span class=cl>  feature
</span></span><span class=line><span class=cl>* feature2
</span></span><span class=line><span class=cl>  main
</span></span></code></pre></div><h2 id=git-log>GIT LOG<a hidden class=anchor aria-hidden=true href=#git-log>#</a></h2><p><code>git log</code> shows the history of commits and branches. It does not make any changes to the repo, index or working area. Use the &ndash;graph option to see a basic diagram of branches and merges:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>❯ git log --oneline --graph --decorate
</span></span><span class=line><span class=cl>*   a7d531d <span class=o>(</span>HEAD -&gt; main<span class=o>)</span> Merge Feature2, resolve conflict in orders.py
</span></span><span class=line><span class=cl><span class=p>|</span><span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=p>|</span> * d0773eb <span class=o>(</span>feature2<span class=o>)</span> Adds input validation to orders.py
</span></span><span class=line><span class=cl>* <span class=p>|</span> bba3001 Modifies output in orders.py
</span></span><span class=line><span class=cl><span class=p>|</span>/
</span></span><span class=line><span class=cl>* 460ce0e Enables user input
</span></span><span class=line><span class=cl>* b9b6064 Creates orders.py
</span></span></code></pre></div><h2 id=git-reset>GIT RESET<a hidden class=anchor aria-hidden=true href=#git-reset>#</a></h2><p><code>git reset</code> is used to rollback to a previous commit. It can affect the repo, the index and the working area depending on the parameters.<br>A common use case is to abandon some changes that have been committed and revert to a previous version of the project. Another is to abandon changes in the working area and revert to the last commit in the repo.</p><p>The reset command will move the current branch to the specified commit. By default, it will also overwrite the index with the contents of the commit. If you want to completely remove all traces of the unwanted change, you can also overwrite the working area using the &ndash;hard option</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; git log --oneline <span class=c1># show the history of commits</span>
</span></span><span class=line><span class=cl>848eae0 <span class=o>(</span>HEAD -&gt; main<span class=o>)</span> Adds search to <span class=m>404</span> page
</span></span><span class=line><span class=cl>364b33f Changes format of <span class=m>404</span> page
</span></span><span class=line><span class=cl>d4ff0dc Modifies position of search box 
</span></span><span class=line><span class=cl>c55dbb1 Enables comments
</span></span><span class=line><span class=cl>cccb986 Adds home page, header and footer
</span></span><span class=line><span class=cl><span class=m>4478398</span> Initial commit
</span></span><span class=line><span class=cl>&gt;
</span></span><span class=line><span class=cl>&gt; git reset --hard d4ff0dc  <span class=c1># Rollback the repo two commits, overwriting the index and working area</span>
</span></span><span class=line><span class=cl>HEAD is now at d4ff0dc Modifies position of search box
</span></span></code></pre></div><p>Other options are:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; git reset --mixed d4ff0dc <span class=c1># Rollback the repo two commits but only overwrite the index. The working area is not touched. This is also the default if no options are specified.</span>
</span></span><span class=line><span class=cl>&gt; git reset --soft d4ff0dc <span class=c1># Rollback the repo two commits, but don&#39;t touch the index or working area</span>
</span></span></code></pre></div><h3 id=head-reset>HEAD RESET<a hidden class=anchor aria-hidden=true href=#head-reset>#</a></h3><p><code>git reset HEAD</code> is a quick way to return the index/working area to the committed state of the repo. This is an unsual reset as it doesn&rsquo;t actually change anything in the repo.</p><p>HEAD is usually poiting to the latest commit on the current branch. Resetting the repo to HEAD changes nothing in the repo, but by default it will perform a <em>mixed</em> reset, overwriting the index. We can also use the &ndash;hard option to overwrite both the index and working area:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; git reset --hard HEAD
</span></span></code></pre></div><h2 id=git-stash>GIT STASH<a hidden class=anchor aria-hidden=true href=#git-stash>#</a></h2><p>The Stash is a temporary storage area to save the working area and index when you need to working on another feature. You don&rsquo;t want to lose or commit what you are currently working on, so you stash the changes, work on something else and then retrieve them later. Its a bit like saving something in a clipboard.</p><p>When you run <code>git stash</code>, GIT copies tracked files in the working area and index that aren&rsquo;t in the current commit and saves them to the stash. It then checks out the current commit (overwriting the working area and index so they match the repo).</p><p>When ready to restore the stashed files, run <code>git stash apply</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; git stash --include-untracked  <span class=c1># Save changes to the stash including untracked files</span>
</span></span><span class=line><span class=cl>&gt;
</span></span><span class=line><span class=cl>&gt; git stash list <span class=c1># List the contents of the stash. This is an array of saves starting with zero</span>
</span></span><span class=line><span class=cl>&gt;
</span></span><span class=line><span class=cl>&gt; git stash apply <span class=c1># Copies the latest entry in the stash to the working area and index. You can also specify an array element number if you don&#39;t want the latest</span>
</span></span></code></pre></div><p><br><br></p><blockquote><p>This article was originally posted on <a href=http://write-verbose.com>Write-Verbose.com</a></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://write-verbose.com/tags/git/>git</a></li><li><a href=https://write-verbose.com/tags/devops/>devops</a></li></ul><nav class=paginav><a class=prev href=https://write-verbose.com/2021/06/27/usinggit/><span class=title>« Prev</span><br><span>GIT branches - merging, rebasing and squashing commits</span></a>
<a class=next href=https://write-verbose.com/2021/06/17/git-cheatnotes/><span class=title>Next »</span><br><span>GIT basics - under-the-hood</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share GIT storage - understanding the stash, working, index, repo on twitter" href="https://twitter.com/intent/tweet/?text=GIT%20storage%20-%20understanding%20the%20stash%2c%20working%2c%20index%2c%20repo&url=https%3a%2f%2fwrite-verbose.com%2f2021%2f06%2f24%2fgitandthefourareas%2f&hashtags=git%2cdevops"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GIT storage - understanding the stash, working, index, repo on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwrite-verbose.com%2f2021%2f06%2f24%2fgitandthefourareas%2f&title=GIT%20storage%20-%20understanding%20the%20stash%2c%20working%2c%20index%2c%20repo&summary=GIT%20storage%20-%20understanding%20the%20stash%2c%20working%2c%20index%2c%20repo&source=https%3a%2f%2fwrite-verbose.com%2f2021%2f06%2f24%2fgitandthefourareas%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GIT storage - understanding the stash, working, index, repo on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwrite-verbose.com%2f2021%2f06%2f24%2fgitandthefourareas%2f&title=GIT%20storage%20-%20understanding%20the%20stash%2c%20working%2c%20index%2c%20repo"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GIT storage - understanding the stash, working, index, repo on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwrite-verbose.com%2f2021%2f06%2f24%2fgitandthefourareas%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GIT storage - understanding the stash, working, index, repo on whatsapp" href="https://api.whatsapp.com/send?text=GIT%20storage%20-%20understanding%20the%20stash%2c%20working%2c%20index%2c%20repo%20-%20https%3a%2f%2fwrite-verbose.com%2f2021%2f06%2f24%2fgitandthefourareas%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GIT storage - understanding the stash, working, index, repo on telegram" href="https://telegram.me/share/url?text=GIT%20storage%20-%20understanding%20the%20stash%2c%20working%2c%20index%2c%20repo&url=https%3a%2f%2fwrite-verbose.com%2f2021%2f06%2f24%2fgitandthefourareas%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://write-verbose.com/>Write-Verbose</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>